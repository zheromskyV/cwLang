<div class="toolbar p-d-flex p-jc-end">
  <p-button 
    styleClass="p-button-success"
    [icon]="icons.add"
    [label]="dictionary.add"
    (click)="addCourse()"
  ></p-button>
</div>

<p-table
  [value]="courses | slice:0" 
  dataKey="_id"
  [rowHover]="true"
  [rows]="5"
  [paginator]="true"
>
  <ng-template pTemplate="header">
    <tr>
      <th style="width: 3rem"></th>
      <th pSortableColumn="title">
        {{ dictionary.courseTitle }}
        <p-sortIcon field="title"></p-sortIcon>
      </th>
      <th pSortableColumn="language">
        {{ dictionary.courseLang }}
        <p-sortIcon field="language"></p-sortIcon>
      </th>
      <th pSortableColumn="level">
        {{ dictionary.courseLevel }}
        <p-sortIcon field="level"></p-sortIcon>
      </th>
      <th pSortableColumn="price">
        {{ dictionary.coursePrice }}
        <p-sortIcon field="price"></p-sortIcon>
      </th>
      <th style="width: 8rem"></th>
    </tr>
  </ng-template>

  <ng-template pTemplate="body" let-course let-expanded="expanded">
    <tr>
      <td>
        <p-button 
          styleClass="p-button-text p-button-rounded p-button-plain"
          [pRowToggler]="course"
          [icon]="expanded ? icons.collapse : icons.expand"
        ></p-button>
      </td>
      <td>{{ course.title }}</td>
      <td>{{ dictionary[course.language] }}</td>
      <td>{{ course.level }}</td>
      <td>{{ course.price }}</td>
      <td>
        <p-button 
          styleClass="p-button-rounded p-button-warning p-mr-2"
          [icon]="icons.edit"
          (click)="editCourse(course)"
        ></p-button>
        <p-button 
          styleClass="p-button-rounded p-button-danger"
          [icon]="icons.delete"
          (click)="deleteCourse(course)"
        ></p-button>
      </td>
    </tr>
  </ng-template>

  <ng-template pTemplate="rowexpansion" let-course>
    <tr class="inner-data">
      <td colspan="6">
        <div>
          <p>{{ course.info }}</p>

          <p-table [value]="course.words" dataKey="_id">
            <ng-template pTemplate="header">
                <tr>
                  <th>{{ dictionary.wordsInitialLang }}</th>
                  <th>{{ dictionary.wordsInitial }}</th>
                  <th>{{ dictionary.wordsTarget }}</th>
                  <th>{{ dictionary.wordsTargetLang }}</th>
                </tr>
              </ng-template>

              <ng-template pTemplate="body" let-word>
                <tr>
                  <td>{{ dictionary[word.initialLang] }}</td>
                  <td>{{ word.initial }}</td>
                  <td>{{ word.target }}</td>
                  <td>{{ dictionary[word.targetLang] }}</td>
                </tr>
              </ng-template>
          </p-table>
        </div>
      </td>
    </tr>
  </ng-template>
</p-table>

<p-confirmDialog></p-confirmDialog>
